{"version":3,"file":"index.js","sources":["../src/base.js","../src/boolean.js","../src/utils.js","../src/sequence.js","../src/dom.js","../src/advice-animal.js","../src/index.js"],"sourcesContent":["import {map} from 'sequence';\n\n// –––––––––––––– //\n// Base Functions //\n// –––––––––––––– //\nexport const inc = num => num + 1;\nexport const dec = num => num - 1;\n\nexport const flip = fn => (...args) => fn(...args.reverse());\n\nexport const isEmpty = object => Object.keys(object).length === 0;\n\nexport const keyfy = obj => {\n  if (typeof obj === 'string') return obj;\n\n  return map(obj, (val, key) => `${key}:${val}`).sort().join(',');\n}\n\n// TODO: Support multiple arguments\nexport const memoize = fn => {\n  if (!(window._memos instanceof Map)) {\n    window._memos = new Map();\n  }\n\n  return arg => {\n    const key = `${fn.name}#${keyfy(arg)}`;\n    if (window._memos.has(key)) {\n      return window._memos.get(key);\n    }\n\n    window._memos.set(key, fn(arg));\n    return window._memos.get(key);\n  }\n}\n","// ––––––––––––– //\n// Boolean Utils //\n// ––––––––––––– //\nexport const eq = (l, r) => l === r;\nexport const greater = (l, r) => l > r;\nexport const not = fn => (...args) => !fn(...args)\nexport const or = (lfn, rfn) => (...args) => lfn(...args) || rfn(...args);\nexport const smaller = (l, r) => l < r;\n\nexport const greaterOrEq = or(greater, eq);\nexport const smallerOrEq = or(smaller, eq);\n","// ––––––––––– //\n// Array Utils //\n// ––––––––––– //\nexport const pushInLast = (arr, val) => {\n  if (arr.length <= 0) {\n    arr.push([]);\n    return pushToLast(arr, val);\n  }\n  return arr[arr.length - 1].push(val);\n}\n","import {inc, dec} from 'base';\nimport {smallerOrEq, greaterOrEq, not} from 'boolean';\nimport {pushInLast} from 'utils';\n\n// –––––––––––––––––– //\n// Sequence functions //\n// –––––––––––––––––– //\n\n// Generate //\nexport const toIterator = function* (obj) {\n  for (let key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      yield [obj[key], key, obj];\n    }\n  }\n}\n\nexport const range = function* (left, right) {\n  const direct = (right - left > 0) ? inc : dec;\n  const compare = (right - left > 0) ? smallerOrEq : greaterOrEq;\n\n  for (let i = left; compare(i, right); i = direct(i)) {\n    yield i;\n  }\n}\n\nexport const take = (gen, n) => {\n  const out = [];\n  \n  for (let i = 0; i < n; i += 1) {\n    const cursor = gen.next();\n\n    if (typeof cursor.value === 'undefined') return out;\n    out.push(cursor.value)\n  }\n\n  return out;\n}\n\n// Read //\nexport const each = function (obj, fn) {\n  for (let params of toIterator(obj)) {\n    fn(...params);\n  }\n}\n\n// Transform //\nexport const map = (obj, fn) => {\n  const out = [];\n  each(obj, (...args) => { out.push(fn(...args)) });\n\n  return out;\n}\n\nexport const reduce = (obj, fn, initialVal = null) => {\n  let objGen = toIterator(obj);\n  let prevVal = initialVal !== null ? initialVal : objGen.next().value[0];\n\n  for (let [val, key] of objGen) {\n    prevVal = fn(prevVal, val, key, obj);\n  }\n\n  return prevVal;\n}\n\nexport const pickBy = (obj, fn) => reduce(\n  obj,\n  (newObj, val, key) => {\n    if (fn(val, key) === true) newObj[key] = val;\n    return newObj;\n  },\n  {}\n);\nexport const pick = (obj, keys) => pickBy(obj, (val, key) => keys.includes(key));\n\nexport const omitBy = (obj, fn) => pickBy(obj, not(fn));\nexport const omit = (obj, keys) => omitBy(obj, (val, key) => keys.includes(key));\n\nexport const partitionBy = (obj, fn) => {\n  let prevTest;\n\n  return reduce(obj, (newArr, val, key) => {\n    const currentTest = fn(val);\n    if (currentTest === prevTest) {\n      pushInLast(newArr, val);\n    } else {\n      newArr.push([val]);\n    };\n    prevTest = currentTest;\n    return newArr;\n  }, [])\n}\n","import { each } from 'sequence';\n\n// ––––––––––––– //\n// DOM Utilities //\n// ––––––––––––– //\nexport const HTML5Tags = [\n  'a', 'abbr', 'address', 'area', 'article', 'aside', 'audio', 'b', 'base',\n  'bdi', 'bdo', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption',\n  'cite', 'code', 'col', 'colgroup', 'datalist', 'dd', 'del', 'details', 'dfn',\n  'dialog', 'div', 'dl', 'dt', 'em', 'embed', 'fieldset', 'figcaption',\n  'figure', 'footer', 'form', 'h1 to h6', 'head', 'header', 'hr', 'html', 'i',\n  'iframe', 'img', 'input', 'ins', 'kbd', 'keygen', 'label', 'legend', 'li',\n  'link', 'main', 'map', 'mark', 'menu', 'menuitem', 'meta', 'meter', 'nav',\n  'noscript', 'object', 'ol', 'optgroup', 'option', 'output', 'p', 'param',\n  'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'script', 'section',\n  'select', 'small', 'source', 'span', 'strong', 'style', 'sub', 'summary',\n  'sup', 'table', 'tbody', 'td', 'textarea', 'tfoot', 'th', 'thead', 'time',\n  'title', 'tr', 'track', 'u', 'ul', 'var', 'video', 'wbr'\n]\n\n//TODO: Write high-order function to abstract pattern below:\nexport const findById = (idOrNode, id) => {\n  if (typeof idOrNode.getElementById !== 'function') {\n    return findById(document, idOrNode);\n  }\n  return idOrNode.getElementById(id);\n}\n\nexport const findAllBySelector = (selectorOrNode, selector) => {\n  if (typeof selectorOrNode.querySelectorAll !== 'function') {\n    return findAllBySelector(document, selectorOrNode);\n  }\n  return selectorOrNode.querySelectorAll(selector);\n}\n\nexport const findBySelector = (selectorOrNode, selector) => {\n  if (typeof selectorOrNode.querySelector !== 'function') {\n    return findBySelector(document, selectorOrNode);\n  }\n  return selectorOrNode.querySelector(selector);\n}\n\nexport const setAttributes = (element, attrs) => {\n  for (let name in attrs) {\n    if (attrs.hasOwnProperty(name)) {\n      element.setAttribute(name, attrs[name]);\n    }\n  }\n}\n\nexport const createTag = (name, attr = {}) => {\n  const el = document.createElement(name);\n  setAttributes(el, attr);\n\n  return el;\n}\n\nexport const h = {};\neach(\n  HTML5Tags,\n  tag => {\n    h[tag] = attrs => createTag(tag, attrs);\n  }\n);\n","import {findBySelector, findById, h} from 'dom';\nimport {memoize} from 'base';\nimport {each, omit, partitionBy, range, reduce} from 'sequence';\n\nconst prompt = findById('prompt');\nconst container = findBySelector('#advice-animal > .canvas-box');\n\n// –––––––––––––––– //\n// Canvas Utilities //\n// –––––––––––––––– //\nconst fontSizeRatiosFor = memoize(font => {\n  const reference = new Map();\n  const ctx = h.canvas().getContext('2d');\n\n  ctx.font = `1px ${font}`\n\n  for (let code of range(0,126)) {\n    const char = String.fromCharCode(code);\n    reference.set(char, ctx.measureText(char).width);\n  }\n\n  return reference;\n});\n\nconst charWidthRatio = (char, font) => fontSizeRatiosFor(font).get(char);\nconst measureText = (text, font, size) => reduce(text, (total, char) => total + charWidthRatio(char, font) * size, 0)\n\nconst breakSentenceAt = (sentence, width, fontName, fontSize) => {\n  if (width.toString() === 'NaN' || typeof width !== 'number') {\n    throw new TypeError('length must be a number');\n  }\n\n  let cumulativeLength = 0;\n  const linesOfWords = partitionBy(sentence.split(' '), word => {\n    const length = measureText(`${word} `, fontName, fontSize);\n    cumulativeLength += length;\n\n    return Math.ceil(cumulativeLength / width);\n  });\n\n  return linesOfWords.map(words => words.join(' '));\n}\n\n// ––––––––––––––––– //\n// Application Logic //\n// ––––––––––––––––– //\nlet getSurface = ({height, width}) => {\n  const surface = h.canvas({id: 'surface', height: height * 2, width: width * 2});\n  container.appendChild(surface);\n\n  return surface;\n}\n\ngetSurface = memoize(getSurface);\n\nconst getSurfaceFor = ({naturalHeight, naturalWidth}) => getSurface({\n  height: naturalHeight,\n  width: naturalWidth\n})\n\nconst getImage = src => {\n  return new Promise ((resolve, reject) => {\n    const img = new Image();\n    img.addEventListener('load', () => {\n      resolve(img)\n    });\n\n    img.addEventListener('error', error => {\n      reject(error)\n    });\n\n    img.src = src;\n  });\n}\n\n//TODO: Move text drawing bit to a function\nconst defaultCaptionOpts = {\n  fontName: 'Impact',\n  fontSize: 10,\n  lineWidth: 5,\n  lineJoin: 'bevel',\n  textAlign: 'center',\n  fillStyle: 'white',\n  textBaseline: 'bottom'\n}\n\nconst drawCaption = (text, options) => {\n  const opts = Object.assign({}, defaultCaptionOpts, options);\n  const margin = 30;\n\n  return cvs => {\n    let {fontSize, fontName} = opts;\n    const ctx = cvs.getContext('2d');\n\n    // Consider fontSize a percentage of Canvas height\n    fontSize = fontSize / 100 * cvs.height;\n    const font = `${fontSize}px ${fontName}`;\n\n    // Set style properties on drawing context\n    each(\n      Object.assign(omit(opts, ['fontName', 'fontSize', 'verticalAlign']), {font}),\n      (val, key) => { ctx[key] = val; }\n    );\n\n    const paragraph = breakSentenceAt(\n      text,\n      cvs.width - margin * 2,\n      fontName,\n      fontSize\n    );\n\n    each(paragraph, (line, lineNumber) => {\n      ctx.strokeText(line, cvs.width/2, cvs.height - margin - (paragraph.length - lineNumber - 1) * fontSize);\n      ctx.fillText(line, cvs.width/2, cvs.height - margin - (paragraph.length - lineNumber - 1) * fontSize);\n    })\n  }\n}\n\nconst createWriter = (cvs, img, font = 'Impact', fontSize = 100) => text => {\n  const ctx = cvs.getContext('2d');\n  ctx.clearRect(0, 0, cvs.width, cvs.height);\n\n  if (img) ctx.drawImage(img, 0, 0, cvs.width, cvs.height);\n\n  drawCaption(text)(cvs);\n}\n\n// After image is loaded, initialize program\ngetImage('./imminent-ned.jpg')\n  .then(img => {\n    const surface = getSurfaceFor(img)\n    const writer = createWriter(surface, img);\n\n    container.appendChild(surface);\n\n    prompt.addEventListener('input', ({target}) => {\n      window.requestAnimationFrame(() => {writer(target.value)});\n    });\n\n    writer('');\n  })\n","import 'advice-animal';\nimport {findById, findBySelector, findAllBySelector} from 'dom';\nimport {each} from 'sequence';\n\nconst extractHash = url => {\n  const HASH_REGEX = /#(.+)$/;\n  const match = url.match(HASH_REGEX);\n  return match ? match[1] : null;\n}\n\nwindow.addEventListener('load', () => {\n  if (window.location.hash !== '') {\n    const shownNode = findById(extractHash(window.location.hash));\n    shownNode.style.display = 'initial';\n  } else {\n    window.location.hash = findBySelector('nav > a').getAttribute('href');\n  }\n})\n\nwindow.addEventListener('hashchange', ({oldURL, newURL}) => {\n  const {location} = event.target;\n  const oldSection = findById(extractHash(oldURL) || '');\n  const newSection = findById(extractHash(newURL) || '');\n\n  oldSection && (oldSection.style.display = 'none');\n  newSection && (newSection.style.display = 'initial');\n});\n\n"],"names":[],"mappings":"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"}