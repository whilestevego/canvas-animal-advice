{"version":3,"file":"index.js","sources":["../src/base.js","../src/boolean.js","../src/utils.js","../src/sequence.js","../src/dom.js","../src/advice-animal.js","../src/shape.js","../src/index.js"],"sourcesContent":["import {map} from 'sequence';\n\n// –––––––––––––– //\n// Base Functions //\n// –––––––––––––– //\nexport const inc = num => num + 1;\nexport const dec = num => num - 1;\n\nexport const flip = fn => (...args) => fn(...args.reverse());\n\nexport const isEmpty = object => Object.keys(object).length === 0;\n\nexport const keyfy = obj => {\n  if (typeof obj === 'string') return obj;\n\n  return map(obj, (val, key) => `${key}:${val}`).sort().join(',');\n}\n\n// TODO: Support multiple arguments\nexport const memoize = fn => {\n  if (!(window._memos instanceof Map)) {\n    window._memos = new Map();\n  }\n\n  return arg => {\n    const key = `${fn.name}#${keyfy(arg)}`;\n    if (window._memos.has(key)) {\n      return window._memos.get(key);\n    }\n\n    window._memos.set(key, fn(arg));\n    return window._memos.get(key);\n  }\n}\n","// ––––––––––––– //\n// Boolean Utils //\n// ––––––––––––– //\nexport const eq = (l, r) => l === r;\nexport const greater = (l, r) => l > r;\nexport const not = fn => (...args) => !fn(...args)\nexport const or = (lfn, rfn) => (...args) => lfn(...args) || rfn(...args);\nexport const smaller = (l, r) => l < r;\n\nexport const greaterOrEq = or(greater, eq);\nexport const smallerOrEq = or(smaller, eq);\n","// ––––––––––– //\n// Array Utils //\n// ––––––––––– //\nexport const pushInLast = (arr, val) => {\n  if (arr.length <= 0) {\n    arr.push([]);\n    return pushToLast(arr, val);\n  }\n  return arr[arr.length - 1].push(val);\n}\n","import {inc, dec} from 'base';\nimport {smallerOrEq, greaterOrEq, not} from 'boolean';\nimport {pushInLast} from 'utils';\n\n// –––––––––––––––––– //\n// Sequence functions //\n// –––––––––––––––––– //\n\n// Generate //\nexport const toIterator = function* (obj) {\n  for (let key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      yield [obj[key], key, obj];\n    }\n  }\n}\n\nexport const range = function* (left, right) {\n  const direct = (right - left > 0) ? inc : dec;\n  const compare = (right - left > 0) ? smallerOrEq : greaterOrEq;\n\n  for (let i = left; compare(i, right); i = direct(i)) {\n    yield i;\n  }\n}\n\nexport const take = (gen, n) => {\n  const out = [];\n  \n  for (let i = 0; i < n; i += 1) {\n    const cursor = gen.next();\n\n    if (typeof cursor.value === 'undefined') return out;\n    out.push(cursor.value)\n  }\n\n  return out;\n}\n\n// Read //\nexport const each = function (obj, fn) {\n  for (let params of toIterator(obj)) {\n    fn(...params);\n  }\n}\n\n// Transform //\nexport const map = (obj, fn) => {\n  const out = [];\n  each(obj, (...args) => { out.push(fn(...args)) });\n\n  return out;\n}\n\nexport const reduce = (obj, fn, initialVal = null) => {\n  let objGen = toIterator(obj);\n  let prevVal = initialVal !== null ? initialVal : objGen.next().value[0];\n\n  for (let [val, key] of objGen) {\n    prevVal = fn(prevVal, val, key, obj);\n  }\n\n  return prevVal;\n}\n\nexport const pickBy = (obj, fn) => reduce(\n  obj,\n  (newObj, val, key) => {\n    if (fn(val, key) === true) newObj[key] = val;\n    return newObj;\n  },\n  {}\n);\nexport const pick = (obj, keys) => pickBy(obj, (val, key) => keys.includes(key));\n\nexport const omitBy = (obj, fn) => pickBy(obj, not(fn));\nexport const omit = (obj, keys) => omitBy(obj, (val, key) => keys.includes(key));\n\nexport const partitionBy = (obj, fn) => {\n  let prevTest;\n\n  return reduce(obj, (newArr, val, key) => {\n    const currentTest = fn(val);\n    if (currentTest === prevTest) {\n      pushInLast(newArr, val);\n    } else {\n      newArr.push([val]);\n    };\n    prevTest = currentTest;\n    return newArr;\n  }, [])\n}\n","import { each } from 'sequence';\n\n// ––––––––––––– //\n// DOM Utilities //\n// ––––––––––––– //\nexport const HTML5Tags = [\n  'a', 'abbr', 'address', 'area', 'article', 'aside', 'audio', 'b', 'base',\n  'bdi', 'bdo', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption',\n  'cite', 'code', 'col', 'colgroup', 'datalist', 'dd', 'del', 'details', 'dfn',\n  'dialog', 'div', 'dl', 'dt', 'em', 'embed', 'fieldset', 'figcaption',\n  'figure', 'footer', 'form', 'h1 to h6', 'head', 'header', 'hr', 'html', 'i',\n  'iframe', 'img', 'input', 'ins', 'kbd', 'keygen', 'label', 'legend', 'li',\n  'link', 'main', 'map', 'mark', 'menu', 'menuitem', 'meta', 'meter', 'nav',\n  'noscript', 'object', 'ol', 'optgroup', 'option', 'output', 'p', 'param',\n  'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'script', 'section',\n  'select', 'small', 'source', 'span', 'strong', 'style', 'sub', 'summary',\n  'sup', 'table', 'tbody', 'td', 'textarea', 'tfoot', 'th', 'thead', 'time',\n  'title', 'tr', 'track', 'u', 'ul', 'var', 'video', 'wbr'\n]\n\n//TODO: Write high-order function to abstract pattern below:\nexport const findById = (idOrNode, id) => {\n  if (typeof idOrNode.getElementById !== 'function') {\n    return findById(document, idOrNode);\n  }\n  return idOrNode.getElementById(id);\n}\n\nexport const findAllBySelector = (selectorOrNode, selector) => {\n  if (typeof selectorOrNode.querySelectorAll !== 'function') {\n    return findAllBySelector(document, selectorOrNode);\n  }\n  return selectorOrNode.querySelectorAll(selector);\n}\n\nexport const findBySelector = (selectorOrNode, selector) => {\n  if (typeof selectorOrNode.querySelector !== 'function') {\n    return findBySelector(document, selectorOrNode);\n  }\n  return selectorOrNode.querySelector(selector);\n}\n\nexport const setAttributes = (element, attrs) => {\n  for (let name in attrs) {\n    if (attrs.hasOwnProperty(name)) {\n      element.setAttribute(name, attrs[name]);\n    }\n  }\n}\n\nexport const createTag = (name, attrs = {}) => {\n  const el = document.createElement(name);\n  setAttributes(el, attrs);\n\n  return el;\n}\n\nexport const h = {};\neach(\n  HTML5Tags,\n  tag => {\n    h[tag] = attrs => createTag(tag, attrs);\n  }\n);\n","import {findBySelector, findById, h} from 'dom';\nimport {memoize} from 'base';\nimport {each, omit, partitionBy, range, reduce} from 'sequence';\n\nconst topCaption = findById('top-caption');\nconst bottomCaption = findById('bottom-caption');\nconst captionForm = findBySelector('.caption-form');\nconst container = findBySelector('#advice-animal > .canvas-box');\n\n// ––––––––––––––––––––– //\n// Canvas Text Utilities //\n// ––––––––––––––––––––– //\n\nconst rulerFor = (fontName, fontSize) => text => {\n  const ctx = h.canvas().getContext('2d');\n\n  ctx.font = `${fontSize}px ${fontName}`;\n  return ctx.measureText(text).width;\n}\n\nconst splitIntoLines = (text, width, fontName, fontSize) => {\n  if (width.toString() === 'NaN' || typeof width !== 'number') {\n    throw new TypeError('width must be a number');\n  }\n  const measure = rulerFor(fontName, fontSize);\n  const spaceLength = measure(' ');\n\n  let cumulativeLength = 0;\n  const linesOfWords = partitionBy(text.split(' '),\n    word => {\n      console.log(cumulativeLength)\n      cumulativeLength += measure(word) + spaceLength;\n      return Math.ceil((cumulativeLength - spaceLength) / width);\n    }\n  );\n\n  return linesOfWords.map(words => words.join(' '));\n}\n\n// ––––––––––––––––– //\n// Application Logic //\n// ––––––––––––––––– //\nconst getSurface = memoize(\n  ({height, width}) => {\n    const surface = h.canvas({id: 'surface', height: height * 2, width: width * 2});\n    container.appendChild(surface);\n\n    return surface;\n  }\n)\n\nconst getSurfaceFor = ({naturalHeight, naturalWidth}) => getSurface({\n  height: naturalHeight,\n  width: naturalWidth\n})\n\nconst getImage = src => {\n  return new Promise ((resolve, reject) => {\n    const img = new Image();\n    img.addEventListener('load', () => {\n      resolve(img)\n    });\n\n    img.addEventListener('error', error => {\n      reject(error)\n    });\n\n    img.src = src;\n  });\n}\n\n//TODO: Move text drawing bit to a function\nconst defaultCaptionOpts = {\n  fontName: 'Impact',\n  fontSize: 10,\n  margin: 30,\n  lineWidth: 5,\n  lineJoin: 'bevel',\n  textAlign: 'center',\n  fillStyle: 'white',\n  textBaseline: 'bottom'\n}\n\nfunction caption (text, options) {\n  const opts = Object.assign({}, defaultCaptionOpts, options);\n\n  return {\n    draw(cvs) {\n      const {height, width} = cvs;\n      const {fontSize, fontName, margin} = opts;\n      const ctx = cvs.getContext('2d');\n\n      // Consider fontSize a percentage of Canvas height\n      const fontSizeInPX = fontSize / 100 * height;\n      const font = `${fontSizeInPX}px ${fontName}`;\n\n      // Set style properties on drawing context\n      Object.assign(ctx, omit(opts, ['margin','fontName', 'fontSize']), {font});\n\n      const lines = splitIntoLines(text, width - margin * 2, fontName, fontSizeInPX);\n      const lineCount = lines.length;\n\n      const verticalLinePos = {\n        top: lineNumber => margin + lineNumber * fontSizeInPX,\n        middle: lineNumber => (height - lineCount * fontSizeInPX)/2 + lineNumber * fontSizeInPX + fontSizeInPX/2,\n        bottom: lineNumber => height - margin - (lineCount - lineNumber - 1) * fontSizeInPX,\n      }\n\n      each(lines, (line, lineNumber) => {\n        ctx.strokeText(line, cvs.width/2, verticalLinePos[opts.textBaseline](lineNumber));\n        ctx.fillText(line, cvs.width/2, verticalLinePos[opts.textBaseline](lineNumber));\n      });\n    }\n  }\n}\n\nconst createWriter = (cvs, img, font = 'Impact', fontSize = 100) => text => {\n  const ctx = cvs.getContext('2d');\n  ctx.clearRect(0, 0, cvs.width, cvs.height);\n\n  if (img) ctx.drawImage(img, 0, 0, cvs.width, cvs.height);\n\n  caption(text.top, {textBaseline: 'top'}).draw(cvs);\n  caption(text.bottom, {textBaseline: 'bottom'}).draw(cvs);\n}\n\n// After image is loaded, initialize program\ngetImage('./imminent-ned.jpg')\n  .then(img => {\n    const surface = getSurfaceFor(img)\n    const writer = createWriter(surface, img);\n\n    container.appendChild(surface);\n\n    captionForm.addEventListener('input', (event) => {\n      const text = {\n        top: topCaption.value || '',\n        bottom: bottomCaption.value || '',\n      }\n      window.requestAnimationFrame(() => {writer(text)});\n    });\n\n    writer('');\n  })\n","import {findBySelector, findById, h} from 'dom';\nimport {each} from 'sequence';\n// TODO: Create Vector class\n// TODO: Create functions to manipulate Vector objects\n{\n  const container = findBySelector('#shapes > .canvas-box');\n\n  const canvas = h.canvas({height: 2000, width: 1000});\n  container.appendChild(canvas);\n\n  // On macOS, press CMD+P for π\n  const π = Math.PI;\n\n  const circle = (ctx, {cx = 0, cy = 0, radius = 1}) => {\n    const path = new Path2D();\n\n    path.arc(cx, cy, radius, 0, 2*π, true);\n\n    ctx.fill(path);\n  };\n\n  const rectangle = (ctx, {cx = 0, cy = 0, width = 2, height = 1}) => {\n    const path = new Path2D();\n\n    path.rect(cx, cy, width, height);\n\n    ctx.fill(path);\n  };\n\n  const square = (ctx, {cx = 0, cy = 0, width = 1}) => {\n    rectangle(ctx, {cx, cy, width, height: width});\n  };\n\n  function Artist (cvs) {\n    const ctx = cvs.getContext('2d');\n    const fns = [circle, square, rectangle];\n\n    ctx.fillStyle = 'White';\n\n    each(\n      fns,\n      fn => {\n        this[fn.name] = arg => {\n          arg ? fn(ctx, arg) : fn(ctx, {});\n          return this;\n        };\n      }\n    );\n  };\n\n  const artist = new Artist(canvas);\n\n  artist\n    .circle({cx: 100, cy: 100, radius: 60})\n    .circle({cx: 200, cy: 300, radius: 80})\n    .square({cx: 400, cy: 200, width: 60 * 3});\n};\n","import 'advice-animal';\nimport 'shape';\nimport {findById, findBySelector, findAllBySelector} from 'dom';\nimport {each} from 'sequence';\n\nconst extractHash = url => {\n  const HASH_REGEX = /#(.+)$/;\n  const match = url.match(HASH_REGEX);\n  return match ? match[1] : null;\n}\n\nwindow.addEventListener('load', () => {\n  if (window.location.hash !== '') {\n    const shownNode = findById(extractHash(window.location.hash));\n    shownNode.style.display = 'flex';\n  } else {\n    window.location.hash = findBySelector('nav > a').getAttribute('href');\n  }\n})\n\nwindow.addEventListener('hashchange', ({oldURL, newURL}) => {\n  const {location} = event.target;\n  const oldSection = findById(extractHash(oldURL) || '');\n  const newSection = findById(extractHash(newURL) || '');\n\n  oldSection && (oldSection.style.display = 'none');\n  newSection && (newSection.style.display = 'flex');\n});\n\n"],"names":[],"mappings":"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"}